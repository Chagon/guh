var http = require('http');

function Server(port, hostname) {

    var options = {
        port: port || 3420,
        hostname: hostname || 'localhost',
        method: 'CONNECT'
    }

    this.reportPosition = function(position) {
        var positionString = '';
        for (var i=0; i<position.lengthl; i++)
            positionString += ' ' + position[i];

        var request = http.request(options);
        console.log(request);
        request.end('ok');

        request.on('connect', function(response, socket, head) {
            socket.setEncoding('UTF-8');
            console.log('Something is working anyways...');

            socket.write(positionString, function() {
                console.log('Did-a-chum, did-a-chim');
            });

            socket.on('data', function(chunk) {
                //    console.log(chunk.toString());
            });
        });
    }
}

module.exports = Server;
